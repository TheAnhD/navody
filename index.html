<!doctype html>
<html>
<head>
	<meta charset="utf-8" />
	<title>Navody - Label Creator</title>
	<link rel="stylesheet" href="styles.css">
</head>
<body>
	<header class="topbar">
		<h1>Navody</h1>
		<nav class="nav">
			<button data-target="home" class="nav-btn" data-i18n="nav_home">Home</button>
			<button data-target="products" class="nav-btn" data-i18n="nav_products">Products</button>
			<button data-target="list" class="nav-btn" data-i18n="nav_list">Products List</button>
			<button data-target="formats" class="nav-btn" data-i18n="nav_formats">Formats</button>
		</nav>
		<!-- Language picker (flag icons) -->
		<div class="lang-picker" id="langPicker">
			<div class="flag" data-locale="en"><img src="assets/flags/gb.svg" alt="EN"></div>
			<div class="flag" data-locale="cs"><img src="assets/flags/cz.svg" alt="CS"></div>
			<div class="flag" data-locale="vi"><img src="assets/flags/vn.svg" alt="VI"></div>
		</div>
	</header>

	<main class="main">
		<section id="home" class="section">
			<h2 data-i18n="welcome_title">Welcome to Navody</h2>
			<p data-i18n="home_description">This app helps you create sticker labels from product text stored locally.</p>
			<p data-i18n="quick_steps">Quick steps:</p>
			<ol>
				<li data-i18n="quick_step_1">Go to Products to add product records (name, EAN, text).</li>
				<li data-i18n="quick_step_2">Go to Products List to browse and search products and select one.</li>
				<li data-i18n="quick_step_3">Go to Template to set label size and generate a PDF. The PDF will be created and opened for printing.</li>
			</ol>
			<p data-i18n="defaults_note">Defaults use A4. You can change label dimensions and layout in Template.</p>
		</section>

		<section id="products" class="section hidden">
			<div class="container">
				<section class="left">
					<h2 data-i18n="add_product_h2">Add product</h2>
					<label data-i18n="label_name">Name<br><input id="name"></label>
					<label data-i18n="label_ean">EAN<br><input id="ean"></label>
					<label data-i18n="label_text_body">Text body<br><textarea id="text_body" required></textarea></label>
					<button id="addBtn" class="btn btn-primary" data-i18n="add">Add</button>

					<hr>

					<p data-i18n="after_adding_products">After adding products, go to Products List to find and select them for label generation.</p>
				</section>

				<section class="right">
					<!-- Recent heading moved outside the card -->
					<h3 class="recent-heading" data-i18n="recent_additions">Recent additions</h3>
					<div id="recentAdded">
						<ul id="recentList"></ul>
					</div>

					<div class="upload-area">
						<h3 data-i18n="import_heading">Import PDFs</h3>
						<button id="importBtn" class="btn btn-primary" data-i18n="import_pdfs">Import selected PDFs</button>
						<div id="importProgress" class="import-progress"></div>
					</div>
				</section>
			</div>
		</section>

		<section id="list" class="section hidden">
			<div class="list-header">
				<h2 data-i18n="list_title">Seznam návodů</h2>
				<input id="searchInput" placeholder="" data-i18n-placeholder="search_placeholder">
			</div>
			<ul id="results"></ul>
		</section>

		<section id="formats" class="section hidden">
			<div class="formats-area">
				<div class="formats-form">
					<h2 class="formats-title-left" data-i18n="formats_save">Save formats</h2>
					<label data-i18n="format_name">Format name<br><input id="formatName"></label>
					<label data-i18n="page_size">Page size<br><select id="fmt_pageSize"><option value="A4">A4</option></select></label>
					<label data-i18n="label_width_mm">Label width (mm)<br><input id="fmt_labelW" value="50"></label>
					<label data-i18n="label_height_mm">Label height (mm)<br><input id="fmt_labelH" value="20"></label>
					<label data-i18n="columns">Columns<br><input id="fmt_cols" value="3"></label>
					<label data-i18n="rows">Rows<br><input id="fmt_rows" value="8"></label>
					<label data-i18n="page_top_offset_mm">Page top offset (mm)<br><input id="fmt_pageTopOffset" value="0"></label>
					<label data-i18n="page_left_offset_mm">Page left offset (mm)<br><input id="fmt_pageLeftOffset" value="0"></label>
					<label data-i18n="font_size_pt">Font size (pt)<br><input id="fmt_fontSize" value="10"></label>
					<div class="form-actions">
						<button id="saveFormatBtn" data-i18n="save_format">Save Format</button>
					</div>
				</div>

				<div class="formats-list-wrap">
					<h2 class="formats-list-title" data-i18n="formats_list">List of Formats</h2>
					<ul id="formatsList"></ul>
					<div class="formats-preview-wrap">
						<h3 data-i18n="preview_title">Preview</h3>
						<div id="formatPreview" style="width:320px;height:240px;border:1px solid #ddd;background:#fff;"></div>
					</div>
				</div>
			</div>
		</section>

	</main>

	<!-- Format chooser modal -->
	<div id="formatModal" class="modal hidden">
		<div class="modal-overlay"></div>
		<div class="modal-box">
			<button id="closeFormatModal" class="modal-close">✕</button>
			<h3 data-i18n="choose_format">Choose format</h3>
			<div id="formatSelectList"></div>
			<div id="formatTestControls" style="margin-top:12px;display:flex;gap:12px;align-items:flex-start;flex-wrap:nowrap">
                <div style="display:flex;flex-direction:column;gap:6px;min-width:180px;align-items:flex-start">
                    <div style="display:flex;align-items:center;gap:8px;white-space:nowrap">
                        <input id="fmt_testMode" type="checkbox" style="margin:0">
                        <label for="fmt_testMode" style="margin:0;font-weight:normal;white-space:nowrap">Test print</label>
                    </div>
                    <div style="font-size:12px;color:#666;margin-top:6px;width:100%">Use Test print to print only the chosen label(s) on the page</div>
                </div>
                <div style="margin-left:auto;display:flex;align-items:center;gap:12px">
                    <label style="display:flex;align-items:center;gap:6px;margin:0">Start <input id="fmt_testStart" type="number" min="1" value="1" style="width:70px;margin-left:6px"></label>
                    <label style="display:flex;align-items:center;gap:6px;margin:0">Count <input id="fmt_testCount" type="number" min="1" value="1" style="width:70px;margin-left:6px"></label>
                </div>
             </div>
				<div class="modal-actions">
					<button id="cancelFormatBtn" data-i18n="cancel">Cancel</button>
				</div>
			</div>
		</div>

	<!-- Format edit modal -->
	<div id="formatEditModal" class="modal hidden">
		<div class="modal-overlay"></div>
		<div class="modal-box">
			<button id="closeFormatEditModal" class="modal-close">✕</button>
			<h3 data-i18n="edit_format">Edit format</h3>
			<label data-i18n="format_name">Name<br><input id="editFormatName"></label>
			<label data-i18n="page_size">Page size<br><select id="edit_fmt_pageSize"><option value="A4">A4</option></select></label>
			<label data-i18n="label_width_mm">Label width (mm)<br><input id="edit_fmt_labelW" value="50"></label>
			<label data-i18n="label_height_mm">Label height (mm)<br><input id="edit_fmt_labelH" value="20"></label>
			<label data-i18n="columns">Columns<br><input id="edit_fmt_cols" value="3"></label>
			<label data-i18n="rows">Rows<br><input id="edit_fmt_rows" value="8"></label>
			<label data-i18n="page_top_offset_mm">Page top offset (mm)<br><input id="edit_fmt_pageTopOffset" value="0"></label>
			<label data-i18n="page_left_offset_mm">Page left offset (mm)<br><input id="edit_fmt_pageLeftOffset" value="0"></label>
			<label data-i18n="font_size_pt">Font size (pt)<br><input id="edit_fmt_fontSize" value="10"></label>
			<div style="margin-top:12px"><h4>Preview</h4><div id="editFormatPreview" style="width:360px;height:200px;border:1px solid #ddd;background:#fff"></div></div>
			<div class="modal-actions">
				<button id="saveFormatEditBtn" data-i18n="save">Save</button>
				<button id="cancelFormatEditBtn" data-i18n="cancel">Cancel</button>
			</div>
		</div>
	</div>

	<!-- Edit product modal -->
	<div id="editModal" class="modal hidden">
		<div class="modal-overlay"></div>
		<div class="modal-box">
			<button id="closeEditModal" class="modal-close">✕</button>
			<h3 data-i18n="edit_product">Edit product</h3>
			<label data-i18n="ean_readonly">EAN (read-only)<br><div id="editEan" class="readonly-field"></div></label>
			<label data-i18n="label_name">Name<br><input id="editName"></label>
			<label data-i18n="label_text_body">Text body<br><textarea id="editText"></textarea></label>
			<div class="modal-actions">
				<button id="saveEditBtn" data-i18n="save">Save</button>
				<button id="cancelEditBtn" data-i18n="cancel">Cancel</button>
			</div>
		</div>
	</div>

	<script src="formatManager.js"></script>
	<script src="productManager.js"></script>
	<script src="locales/all_locales.js"></script>
	<script src="renderer.js"></script>
</body>
</html>